# 二叉搜索树、B树、B+树、AVL树、红黑树

### 二叉搜索树

二叉搜索树存在一定局限：

在查找数据时，最好的时间复杂Ologn，但是在特殊情况下，数据在树的一侧按顺序排列，树会退化为一个链表，时间复杂度会退化为On，因此的话又出现了AVL树和红黑树。



### AVL 树 **平衡二叉树**

带有平衡条件的二叉搜索树，左右子树的树高不超过1，插入删除操作，破坏了条件，需要通过**旋转**来保持平衡，旋转是非常耗时的，因此**AVL树适合用于插入删除次数比较少，查找比较多的情况。**

四种旋转操作：右单旋转，左单旋转，先左后右，先右后左

AVL存在的局限性：

维护这种高度平衡所付出的代价比从中获得效益还大，应用不多

如果应用场景对插入删除不频繁，只是对查找要求比较高，AVL较优于红黑树



### 红黑树

红黑树是每个节点都带有颜色属性的二叉搜索树，颜色为红色或黑色

**特征：**

**根节点是黑色**

**所有叶子节点（最底层nil节点）都是黑色**

**每个红色节点的两个子节点都是黑色 所以不能有两个连续的红色节点**

**从对于任意节点而言，其到叶子点树NULL指针的每条路径都包含相同数目的黑节点**



红黑树是一种弱平衡二叉树，相同节点下，AVL树的高度低于红黑树，但是红黑树旋转次数少，对于插入删除操作比较多的情况下，使用红黑树。



### B树

平衡多路查找树，是一种多叉树，一般是用在数据库的索引技术中

搜索B树时， 访问节点（即读取磁盘）的次数与树的高度呈正比，而B树与红黑树和普通的二叉查找树相比，虽然高度都是对数数量级，但是显然B树中log函数的底可以比2更大，因此，和二叉树相比，极大地减少了磁盘读取的次数。



### B+树

B+树是B树的一个升级版本，B+树查找的效率比B树更高，更稳定

非叶子节点只保存索引，不保存实际的数据指针，数据指针都保存在叶子结点中。

相比较B树的：

B+树的数据都保存在叶子结点，非叶子节点只保存索引，能保存更多的数据

叶子节点之间有一个链指针，能够在叶子的节点之间更快完成所有数据的区间查找

B树相比B+树的优点：如果经常访问的数据距离根节点更近，B树会更快





**常见问题**

**为什么要有红黑树：**

解决了AVL树插入删除操作较多情况下，旋转带来的性能的影响，红黑树的旋转次数更少，确保了插入和删除最坏的时间复杂度都是Ologn

**B+树和B树**

B/B+树用在磁盘文件组织、数据索引和数据库索引中。其中B+树比B 树更适合实际应用中操作系统的文件索引和数据库索引，因为： **1、B+树的磁盘读写代价更低** B+树的内部结点并没有指向关键字具体信息的指针。因此其**内部结点**相对B 树**更小**。如果把所有同一内部结点的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就越多。相对来说IO读写次数也就降低了。

**B+-tree的查询效率更加稳定** 由于非终结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须走一条从根结点到叶子结点的路。所有关键字查询的**路径长度相同**，导致每一个数据的查询效率相当。

**B树在元素遍历的时候效率较低**，B+树叶子结点之间连接有一根指针，方便全表扫描和区间查询



